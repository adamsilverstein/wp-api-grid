/*! WP API Grid - v0.1.0
 * http://wordpress.org/plugins
 * Copyright (c) 2016; * Licensed GPLv2+ */
!function(a,b,c){"use strict";var d=b(".api-image-gallery-container"),e=_.template('<img class="grid-image" src="<%- data.source_url %>">');d.masonry({itemSelector:".grid-image",percentPosition:!0});var f=function(a){return a.done(function(a){_.each(a,function(a){d.append(e({data:a}))}),d.imagesLoaded().progress(function(){d.masonry("reloadItems"),d.masonry("layout")})})};wp.api.loadPromise.done(function(){var a=new wp.api.collections.Media;f(a.fetch()).done(function(){var b,c=function(){b=d.find(".grid-image").last(),0!==b.filter(":onScreen").length&&(console.log(a.state),a.state.currentPage===a.state.totalPages?clearInterval(e):(d.masonry().masonry("reloadItems"),f(a.more())))},e=setInterval(c,500)})})}(this,jQuery);